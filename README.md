# TaskManager API

Простой RESTful API, построенный на **Laravel**, для управления пользователями и задачами. API поддерживает регистрацию пользователей, аутентификацию, управление профилем и CRUD-операции с задачами.

## Возможности
- Регистрация, вход и выход пользователей с использованием Laravel Sanctum для аутентификации на основе токенов.
- Управление пользователями: просмотр списка пользователей, просмотр/обновление профиля, удаление пользователей (для некоторых действий может потребоваться доступ администратора).
- Управление задачами: создание, просмотр, обновление и удаление задач с фильтрацией по статусу.
- Документация API предоставлена в формате OpenAPI 3.1.0.

## Технологии
- **Фреймворк**: Laravel
- **Аутентификация**: Laravel Sanctum
- **База данных**: MySQL (или другая база данных, поддерживаемая Laravel)
- **Документация API**: OpenAPI 3.1.0

## Требования
- PHP >= 8.1
- Composer
- MySQL (или другая база данных, поддерживаемая Laravel)
- Git

## Установка

1. **Клонируйте репозиторий**:
   ```bash
   git clone <URL-репозитория>
   cd taskmanager-api
   ```

2. **Установите зависимости**:
   ```bash
   composer install
   ```

3. **Настройте окружение**:
   - Настройте файл `.env` с учетными данными базы данных и другими параметрами:
     ```env
     APP_NAME=TaskManager
     APP_URL=http://127.0.0.1:8000
     DB_CONNECTION=mysql
     DB_HOST=127.0.0.1
     DB_PORT=3306
     DB_DATABASE=taskmanager
     DB_USERNAME=root
     DB_PASSWORD=
     ```

4. **Сгенерируйте ключ приложения**:
   ```bash
   php artisan key:generate
   ```

5. **Выполните миграции**:
   ```bash
   php artisan migrate
   ```

6. **Запустите сервер разработки**:
   ```bash
   php artisan serve
   ```
   API будет доступен по адресу `http://127.0.0.1:8000/api`.

## Использование API

### Базовый URL
`http://127.0.0.1:8000/api`

### Аутентификация
- **Регистрация**: `POST /register` (требуются `email`, `password`).
- **Вход**: `POST /login` (требуются `email` и `password`).
- **Выход**: `POST /logout` (требуется Bearer-токен).

Для аутентифицированных запросов необходимо указать `Bearer`-токен в заголовке `Authorization`.

### Эндпоинты
- **Регистрация/Вход**:
  - `POST /register`: Зарегистрироваться.
  - `POST /login`: Войти.
  - `POST /logout`: Выйти.
- **Пользователи**:
  - `GET /users`: Получить список всех пользователей (может потребоваться доступ администратора).
  - `GET /user`: Получить профиль аутентифицированного пользователя.
  - `PATCH /user`: Обновить профиль аутентифицированного пользователя.
  - `DELETE /user/{user}`: Удалить конкретного пользователя.
- **Задачи**:
  - `GET /tasks`: Получить список задач (поддерживает параметр `status`, например, `?status=opened`).
  - `POST /tasks`: Создать новую задачу.
  - `GET /tasks/{task}`: Получить конкретную задачу.
  - `PATCH /tasks/{task}`: Обновить конкретную задачу.
  - `DELETE /tasks/{task}`: Удалить конкретную задачу.

### Пример запроса
**Вход**:
```bash
curl -X POST http://127.0.0.1:8000/api/login \
  -H "Content-Type: application/json" \
  -d '{"email": "john@example.com", "password": "password123"}'
```

**Ответ**:
```json
{
  "user": {
    "id": 1,
    "email": "john@example.com"
  },
  "token": "1|skdklsdksldiuwle23"
}
```

### Документация API
API задокументирован в формате OpenAPI 3.1.0. Спецификация доступна в файле `openapi.yaml`. Вы можете просматривать её с помощью инструментов, таких как Swagger UI, или импортировать в Postman.

Для просмотра с помощью Swagger UI:
1. Установите Swagger UI локально или используйте онлайн-просмотрщик.
2. Загрузите файл `openapi.yaml`.

## Тестирование
Запустите тесты с помощью PHPUnit:
```bash
php artisan test
```